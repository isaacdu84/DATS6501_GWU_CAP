# Evaluating the onroad traffic crashes in the City of Chicago
This is a repository created for DATS6501: Data Science capstone project at the George Washington University.<br>
This repository include python scripts included in jupyter notebooks that were intended to model the crash risks associated with each road segment in the City of Chicago.

## Methodology
The purpose of this project is to explore and build models to evaluate the risk of on-road traffic crashes.<br>
The crash events were first mapped to each road segment by their geographcial reference information (i.e. latitude and longitude). Based on such mapping, each crash event will have information associated with crash itself, such as day of the week and hour of the day, as well as all the road information such as road length, road width etc. "Hypothetical" negative events can thus be generated by identifying road segments without crashes and expanding them across the time (e.g. day of the week and hour of they day). 

The core concept is to use the probability generated from a classifier to represent such risks. To be more specific, this project will select and optimize a classifier using the positive and negative samples mentioned above, and generate probabilities of an instance being "positive". A more intuitive explanation to this metric would be that: given a certain time (day of week and hour of day), what is the probability of one or more crashes will occur?

## How to download the raw input data
The raw data is stored in AWS S3 with public access enabled. Please use "Download_rawdata.ipynb" to download the data into the correct directories. Please make sure you are in the project root directory where all the other jupyter notebooks on modeling are located.


## How to run the scripts
### Requirements
Please use Python2 instead of Python3 as there may be incompatibility issues while processing undirectional graph and shapefiles.<br>
Please ensure the following python packages are installed, upgraded or downgraded to the version listed below to avoid unexpected imcompatibility issues.<br>



The scripts are written in Jupyter Notebooks with markdowns and comments, making it self-explanatory.<br>
* "Modeling_AADT.ipynb" performs a systematic screening of features and models and trained the selected model to calculate the traffic volume associated with each road segment because traffic volume is an important feature to the prediction of risks.
* "Modeling_crash.ipynb" performs the generation of training datasets (positive and negative samples for the classification) and trains a random forest classifier to predict such risks.
* "Modeling_prediction.ipynb" will calculate the risks using the trained model and the necessary features, and save the results as csv files to the local directory.<br>
Please run the three notebooks in the abover order to make sure each execution has necessary data and intermediate files.<br>
Once these scripts are executed, several intermediate files will be generated by "pickle" as ".p" format. This ensures there are checkpoints and avoid re-running steps that are computationally expensive multiple times during debugging.

The repository also includes a "utility_function.py" file, which includes all the functions that are called in the notebooks. This may make the notebooks less bulky and the functions easily managed. **Please make sure this python file is in the same directory with the notebooks to avoid errors.**<br>

## Visualization
Due to the complexity of hosting a prediction engine online, the risks associated with each road segment at certain times were first calculated and imported into a Tableau dashboard for the demonstration purpose.

Please follow this link to view the demo application of this project.
